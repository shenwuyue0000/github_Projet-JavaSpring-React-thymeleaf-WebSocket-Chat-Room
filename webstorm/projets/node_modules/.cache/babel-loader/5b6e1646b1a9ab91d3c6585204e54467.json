{"ast":null,"code":"window.addEventListener(\"load\", function (event) {\n  function GetQueryString(name) {\n    var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\n    var r = window.location.search.substr(1).match(reg);\n    if (r != null) return unescape(r[2]);\n    return null;\n  } //GetQueryString(\"pseudo\");\n  //let pseudo = prompt( \"Veuillez saisir votre pseudo :\" );\n\n\n  let pseudo = GetQueryString(\"pseudo\");\n  let ws = new WebSocket(\"ws://localhost:8081/testWS/chatserver/\" + pseudo);\n  let txtHistory = document.getElementById(\"history\");\n  let txtMessage = document.getElementById(\"txtMessage\");\n  txtMessage.focus();\n  ws.addEventListener(\"open\", function (evt) {\n    console.log(\"Connection established\");\n  });\n  ws.addEventListener(\"message\", function (evt) {\n    let message = evt.data;\n    console.log(\"Receive new message: \" + message);\n    txtHistory.value += message + \"\\n\";\n  });\n  ws.addEventListener(\"close\", function (evt) {\n    console.log(\"Connection closed\");\n  });\n  let btnSend = document.getElementById(\"btnSend\");\n  btnSend.addEventListener(\"click\", function (clickEvent) {\n    ws.send(txtMessage.value);\n    txtMessage.value = \"\";\n    txtMessage.focus();\n  });\n  let btnClose = document.getElementById(\"btnClose\");\n  btnClose.addEventListener(\"click\", function (clickEvent) {\n    ws.close();\n  });\n});","map":{"version":3,"names":["window","addEventListener","event","GetQueryString","name","reg","RegExp","r","location","search","substr","match","unescape","pseudo","ws","WebSocket","txtHistory","document","getElementById","txtMessage","focus","evt","console","log","message","data","value","btnSend","clickEvent","send","btnClose","close"],"sources":["E:/webstorm/projets/src/test.js"],"sourcesContent":["window.addEventListener( \"load\", function( event ) {\r\n\r\n    function GetQueryString(name)\r\n    {\r\n        var reg = new RegExp(\"(^|&)\"+ name +\"=([^&]*)(&|$)\");\r\n        var r = window.location.search.substr(1).match(reg);\r\n        if(r!=null)return unescape(r[2]); return null;\r\n    }\r\n    //GetQueryString(\"pseudo\");\r\n\r\n\r\n    //let pseudo = prompt( \"Veuillez saisir votre pseudo :\" );\r\n    let pseudo=GetQueryString(\"pseudo\");\r\n    let ws = new WebSocket( \"ws://localhost:8081/testWS/chatserver/\" + pseudo );\r\n\r\n    let txtHistory = document.getElementById( \"history\" );\r\n    let txtMessage = document.getElementById( \"txtMessage\" );\r\n    txtMessage.focus();\r\n\r\n\r\n    ws.addEventListener( \"open\", function( evt ) {\r\n        console.log( \"Connection established\" );\r\n    });\r\n\r\n    ws.addEventListener( \"message\", function( evt ) {\r\n        let message = evt.data;\r\n        console.log( \"Receive new message: \" + message );\r\n        txtHistory.value += message + \"\\n\";\r\n    });\r\n\r\n    ws.addEventListener( \"close\", function( evt ) {\r\n        console.log( \"Connection closed\" );\r\n    });\r\n\r\n\r\n    let btnSend = document.getElementById( \"btnSend\" );\r\n    btnSend.addEventListener( \"click\", function( clickEvent ) {\r\n        ws.send( txtMessage.value );\r\n        txtMessage.value = \"\";\r\n        txtMessage.focus();\r\n    });\r\n\r\n    let btnClose = document.getElementById( \"btnClose\" );\r\n    btnClose.addEventListener( \"click\", function( clickEvent ) {\r\n        ws.close();\r\n    });\r\n\r\n});"],"mappings":"AAAAA,MAAM,CAACC,gBAAP,CAAyB,MAAzB,EAAiC,UAAUC,KAAV,EAAkB;EAE/C,SAASC,cAAT,CAAwBC,IAAxB,EACA;IACI,IAAIC,GAAG,GAAG,IAAIC,MAAJ,CAAW,UAASF,IAAT,GAAe,eAA1B,CAAV;IACA,IAAIG,CAAC,GAAGP,MAAM,CAACQ,QAAP,CAAgBC,MAAhB,CAAuBC,MAAvB,CAA8B,CAA9B,EAAiCC,KAAjC,CAAuCN,GAAvC,CAAR;IACA,IAAGE,CAAC,IAAE,IAAN,EAAW,OAAOK,QAAQ,CAACL,CAAC,CAAC,CAAD,CAAF,CAAf;IAAuB,OAAO,IAAP;EACrC,CAP8C,CAQ/C;EAGA;;;EACA,IAAIM,MAAM,GAACV,cAAc,CAAC,QAAD,CAAzB;EACA,IAAIW,EAAE,GAAG,IAAIC,SAAJ,CAAe,2CAA2CF,MAA1D,CAAT;EAEA,IAAIG,UAAU,GAAGC,QAAQ,CAACC,cAAT,CAAyB,SAAzB,CAAjB;EACA,IAAIC,UAAU,GAAGF,QAAQ,CAACC,cAAT,CAAyB,YAAzB,CAAjB;EACAC,UAAU,CAACC,KAAX;EAGAN,EAAE,CAACb,gBAAH,CAAqB,MAArB,EAA6B,UAAUoB,GAAV,EAAgB;IACzCC,OAAO,CAACC,GAAR,CAAa,wBAAb;EACH,CAFD;EAIAT,EAAE,CAACb,gBAAH,CAAqB,SAArB,EAAgC,UAAUoB,GAAV,EAAgB;IAC5C,IAAIG,OAAO,GAAGH,GAAG,CAACI,IAAlB;IACAH,OAAO,CAACC,GAAR,CAAa,0BAA0BC,OAAvC;IACAR,UAAU,CAACU,KAAX,IAAoBF,OAAO,GAAG,IAA9B;EACH,CAJD;EAMAV,EAAE,CAACb,gBAAH,CAAqB,OAArB,EAA8B,UAAUoB,GAAV,EAAgB;IAC1CC,OAAO,CAACC,GAAR,CAAa,mBAAb;EACH,CAFD;EAKA,IAAII,OAAO,GAAGV,QAAQ,CAACC,cAAT,CAAyB,SAAzB,CAAd;EACAS,OAAO,CAAC1B,gBAAR,CAA0B,OAA1B,EAAmC,UAAU2B,UAAV,EAAuB;IACtDd,EAAE,CAACe,IAAH,CAASV,UAAU,CAACO,KAApB;IACAP,UAAU,CAACO,KAAX,GAAmB,EAAnB;IACAP,UAAU,CAACC,KAAX;EACH,CAJD;EAMA,IAAIU,QAAQ,GAAGb,QAAQ,CAACC,cAAT,CAAyB,UAAzB,CAAf;EACAY,QAAQ,CAAC7B,gBAAT,CAA2B,OAA3B,EAAoC,UAAU2B,UAAV,EAAuB;IACvDd,EAAE,CAACiB,KAAH;EACH,CAFD;AAIH,CA/CD"},"metadata":{},"sourceType":"module"}